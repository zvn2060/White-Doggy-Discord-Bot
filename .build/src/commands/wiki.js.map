{
  "version": 3,
  "sources": ["../../../src/commands/wiki.ts"],
  "sourcesContent": ["import { ChatInputCommandInteraction, Client, SlashCommandBuilder } from 'discord.js';\nimport { Command } from './command';\n\nconst axios = require('axios').default;\n\n\nexport const Wiki: Command = {\n\tname: \"wiki\",\n\tdescription: \"\u641C\u5C0B War Thunder Wiki \u4E0A\u6A19\u984C\u5305\u542B query \u9801\u9762\",\n\t// data: new SlashCommandBuilder().setName('wiki')\n\t// \t.setDescription('')\n\t// \t.addStringOption(\n\t// \t\toption => option.setName(\"query\")\n\t// \t\t\t.setRequired(true)\n\t// \t\t\t.setDescription(\"\u9808\u5305\u542B\u7684\u8A5E\")\n\t// \t)\n\t// \t.addIntegerOption(\n\t// \t\toption => option.setName(\"limit\")\n\t// \t\t\t.setDescription(\"\u6700\u5927\u8FD4\u56DE\u7684\u9801\u9762\u6578\")\n\t// \t),\n\n\trun: async (client: Client, interaction: ChatInputCommandInteraction) => {\n\t\tconst query = interaction.options.getString(\"query\")!!;\n\t\tconst limit = interaction.options.getInteger(\"limit\") ?? 3;\n\t\tconst query_result = await axios.get(\"https://wiki.warthunder.com/api.php\", {\n\t\t\tparams: {\n\t\t\t\taction: \"query\",\n\t\t\t\tprop: \"info\",\n\t\t\t\tgenerator: \"search\",\n\t\t\t\tformat: \"json\",\n\t\t\t\tutf8: \"1\",\n\t\t\t\tinprop: \"url\",\n\t\t\t\tgsrsearch: query,\n\t\t\t\tgsrlimit: limit\n\t\t\t}\n\t\t})\n\n\n\t\tconst pages: Page[] = Object.values(query_result.data.query.pages)\n\t\tconst urls = pages.sort(Page.compare).map(page => page.fullurl)\n\t\tinteraction.reply(urls[0]);\n\t}\n\n}\n\n\n\nclass Page {\n\tpageid: number;\n\tns: number;\n\ttitle: string;\n\tindex: number;\n\tcontentmodel: string;\n\tpagelanguage: string;\n\tpagelanguagehtmlcode: string;\n\tpagelanguagedir: string;\n\ttouched: string;\n\tlastrevid: number;\n\tlength: number;\n\tfullurl: string;\n\tediturl: string;\n\tcanonicalurl: string;\n\n\tconstructor(pageid: number, ns: number, title: string, index: number, contentmodel: string,\n\t\tpagelanguage: string, pagelanguagehtmlcode: string, pagelanguagedir: string, touched: string, lastrevid: number,\n\t\tlength: number, fullurl: string, editurl: string, canonicalurl: string) {\n\t\tthis.pageid = pageid;\n\t\tthis.ns = ns;\n\t\tthis.title = title;\n\t\tthis.index = index;\n\t\tthis.contentmodel = contentmodel;\n\t\tthis.pagelanguage = pagelanguage;\n\t\tthis.pagelanguagehtmlcode = pagelanguagehtmlcode;\n\t\tthis.pagelanguagedir = pagelanguagedir;\n\t\tthis.touched = touched;\n\t\tthis.lastrevid = lastrevid;\n\t\tthis.length = length;\n\t\tthis.fullurl = fullurl;\n\t\tthis.editurl = editurl;\n\t\tthis.canonicalurl = canonicalurl;\n\t}\n\n\tstatic compare(a: Page, b: Page) {\n\t\treturn a.index - b.index;\n\t}\n}"],
  "mappings": ";;;;;;;AAAA;AAAA;AAAA;AAGA,MAAM,QAAQ,QAAQ,SAAS;AAGxB,MAAM,OAAgB;AAAA,EAC5B,MAAM;AAAA,EACN,aAAa;AAAA,EAab,KAAK,OAAO,QAAgB,gBAA6C;AACxE,UAAM,QAAQ,YAAY,QAAQ,UAAU;AAC5C,UAAM,QAAQ,YAAY,QAAQ,WAAW,YAAY;AACzD,UAAM,eAAe,MAAM,MAAM,IAAI,uCAAuC;AAAA,MAC3E,QAAQ;AAAA,QACP,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,WAAW;AAAA,QACX,QAAQ;AAAA,QACR,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,WAAW;AAAA,QACX,UAAU;AAAA;AAAA;AAKZ,UAAM,QAAgB,OAAO,OAAO,aAAa,KAAK,MAAM;AAC5D,UAAM,OAAO,MAAM,KAAK,KAAK,SAAS,IAAI,UAAQ,KAAK;AACvD,gBAAY,MAAM,KAAK;AAAA;AAAA;AAOzB,WAAW;AAAA,EAgBV,YAAY,QAAgB,IAAY,OAAe,OAAe,cACrE,cAAsB,sBAA8B,iBAAyB,SAAiB,WAC9F,QAAgB,SAAiB,SAAiB,cAAsB;AACxE,SAAK,SAAS;AACd,SAAK,KAAK;AACV,SAAK,QAAQ;AACb,SAAK,QAAQ;AACb,SAAK,eAAe;AACpB,SAAK,eAAe;AACpB,SAAK,uBAAuB;AAC5B,SAAK,kBAAkB;AACvB,SAAK,UAAU;AACf,SAAK,YAAY;AACjB,SAAK,SAAS;AACd,SAAK,UAAU;AACf,SAAK,UAAU;AACf,SAAK,eAAe;AAAA;AAAA,SAGd,QAAQ,GAAS,GAAS;AAChC,WAAO,EAAE,QAAQ,EAAE;AAAA;AAAA;",
  "names": []
}
